st_transform(crs = 5179)
hospitals <- st_read(dsn = "data_final/seoul_hospitals",
layer = "seoul_hospitals") %>%
st_transform(crs = 5179)
residence <- st_read(dsn = "data_final/seoul_residential",
layer = "seoul_residential") %>%
st_transform(crs = 5179)
road <- st_read(dsn="data_final/seoul_roads",
layer = "seoul_roads")%>%
st_transform(crs = 5179)
clinics <- st_read(dsn = "data_final/seoul_clinics",
layer = "seoul_clinics") %>%
st_transform(crs = 5179)
hospitals <- st_read(dsn = "data_final/seoul_hospitals",
layer = "seoul_hospitals") %>%
st_transform(crs = 5179)
residence <- st_read(dsn = "data_final/seoul_residential",
layer = "seoul_residential") %>%
st_transform(crs = 5179)
road <- st_read(dsn="data_final/seoul_roads",
layer = "seoul_roads")%>%
st_transform(crs = 5179)
population <- read_csv("data_final/population_seoul")
population <- read_csv("data_final/population_seoul.csv")
View(population)
pop <- population %>%
select(1,2) %>%
mutate(Elderly_pop = 0.1738*`Total population (Person)`)
View(pop)
pop <- population %>%
select(1,2) %>%
mutate(Elderly_pop = round(0.1738*`Total population (Person)`,1))
View(pop)
pop <- population %>%
select(1,2) %>%
mutate(Elderly_pop = round(0.1738*`Total population (Person)`,0))
View(pop)
View(seoul)
Gu <- pop$`By administrative divisions(eup, myeon, dong)`
pop <- population %>%
select(1,2) %>%
mutate(Elderly_pop = round(0.1758*`Total population (Person)`,0))
korea <- st_read(dsn = "data_final/seoul_adm2",
layer= "seoul_adm2") %>%
st_transform(crs = 5179)
seoul <- st_read(dsn = "data_final/seoul_adm2",
layer= "seoul_adm2") %>%
st_transform(crs = 5179)
Gu <- pop$`By administrative divisions(eup, myeon, dong)`
seoul <- seoul %>%
filter(name_en %in% Gu)
View(seoul)
Gu <- pop$`By administrative divisions(eup, myeon, dong)`
seoul <- seoul %>%
filter(name_en %in% Gu)
qtm(seoul)
colnames(pop)
pop <- population %>%
select(1,2) %>%
mutate(Elderly_pop = round(0.1758*`Total population (Person)`,0)) %>%
rename(`By administrative divisions(eup, myeon, dong)` = name_en)
pop <- population %>%
select(1,2) %>%
mutate(Elderly_pop = round(0.1758*`Total population (Person)`,0)) %>%
rename(name_en =`By administrative divisions(eup, myeon, dong)`)
seoul_pop <- seoul %>%
inner_join(pop,
by = name_en)
seoul_pop <- seoul %>%
left_join(pop,
by = name_en)
seoul_pop <- seoul %>%
left_join(pop,
by = "name_en")
View(seoul_pop)
View(pop)
?st_write
st_write(seoul_pop,
dsn = "data_final",
layer = "seoul_pop",
driver = "ESRI Shapefile")
seoul_pop <- st_read(dsn = "data_final",
layer = "seoul_pop")
View(seoul_pop)
seoul_pop <- seoul %>%
left_join(pop,
by = "name_en") %>%
select(4,5,7,8)
st_write(seoul_pop,
dsn = "data_final",
layer = "seoul_pop",
driver = "ESRI Shapefile")
seoul_pop <- st_read(dsn = "data_final",
layer = "seoul_pop")
View(seoul_pop)
View(hospitals)
View(korea)
View(pop)
tm_shape(seoul_pop)+
tm_fill("Elderly_pop",
style = "quantile",
palette = "Blues",
title = "Dependency ratio") +
tm_layout(main.title = "Elderly Population",
main.title.position = "center",
main.title.size = 1.2,
legend.height = 0.45,
legend.width = 0.35,
frame = TRUE) +
tm_borders(alpha = 0.5) +
tm_compass(type="8star", size = 2) +
tm_scale_bar() +
tm_grid(alpha =0.2) +
tm_credits("Source: Data.korea",
position = c("left", "bottom"))
colnames(seoul_pop)
tm_shape(seoul_pop)+
tm_fill("Eldrly_",
style = "quantile",
palette = "Blues",
title = "Dependency ratio") +
tm_layout(main.title = "Elderly Population",
main.title.position = "center",
main.title.size = 1.2,
legend.height = 0.45,
legend.width = 0.35,
frame = TRUE) +
tm_borders(alpha = 0.5) +
tm_compass(type="8star", size = 2) +
tm_scale_bar() +
tm_grid(alpha =0.2) +
tm_credits("Source: Data.korea",
position = c("left", "bottom"))
tm_shape(seoul_pop)+
tm_fill("Eldrly_",
style = "quantile",
palette = "Blues",
title = "Elderly Population") +
tm_layout(main.title = "Elderly Population",
main.title.position = "center",
main.title.size = 1.2,
legend.height = 0.45,
legend.width = 0.35,
frame = TRUE) +
tm_borders(alpha = 0.5) +
tm_compass(type="8star", size = 2) +
tm_scale_bar() +
tm_grid(alpha =0.2) +
tm_credits("Source: Data.korea",
position = c("left", "bottom"))
tm_shape(seoul_pop)+
tm_fill("Eldrly_",
style = "quantile",
palette = "Blues",
title = "Elderly Population") +
tm_layout(main.title = "Elderly Population",
main.title.position = "center",
main.title.size = 1.2,
legend.height = 0.45,
legend.width = 0.35,
frame = TRUE) +
tm_borders(alpha = 0.5) +
tm_compass(type="8star", size = 2) +
tm_scale_bar() +
tm_grid(alpha =0.2) +
tm_credits("Source: Data.korea",
position = c("left", "bottom")) +
tmap_style("classic")
tm_shape(seoul_pop)+
tm_fill("Eldrly_",
style = "quantile",
palette = "-Greens",
title = "Elderly Population") +
tm_layout(main.title = "Elderly Population",
main.title.position = "center",
main.title.size = 1.2,
legend.height = 0.45,
legend.width = 0.35,
frame = TRUE) +
tm_borders(alpha = 0.5) +
tm_compass(type="8star", size = 2) +
tm_scale_bar() +
tm_grid(alpha =0.2) +
tm_credits("Source: Data.korea",
position = c("left", "bottom")) +
tmap_style("classic")
tm_shape(seoul_pop)+
tm_fill("Eldrly_",
style = "quantile",
palette = "Greens",
title = "Elderly Population") +
tm_layout(main.title = "Elderly Population",
main.title.position = "center",
main.title.size = 1.2,
legend.height = 0.45,
legend.width = 0.35,
frame = TRUE) +
tm_borders(alpha = 0.5) +
tm_compass(type="8star", size = 2) +
tm_scale_bar() +
tm_grid(alpha =0.2) +
tm_credits("Source: Data.korea",
position = c("left", "bottom")) +
tmap_style("classic")
seoul <- st_read(dsn = "data_final/seoul_adm2",
layer= "seoul_adm2") %>%
st_transform(crs = 5179)
pacman::p_load(sf, readr, tidyverse, tmap)
seoul <- st_read(dsn = "data_final/seoul_adm2",
layer= "seoul_adm2") %>%
st_transform(crs = 5179)
clinics <- st_read(dsn = "data_final/seoul_clinics",
layer = "seoul_clinics") %>%
st_transform(crs = 5179)
hospitals <- st_read(dsn = "data_final/seoul_hospitals",
layer = "seoul_hospitals") %>%
st_transform(crs = 5179)
residence <- st_read(dsn = "data_final/seoul_residential",
layer = "seoul_residential") %>%
st_transform(crs = 5179)
road <- st_read(dsn="data_final/seoul_roads",
layer = "seoul_roads")%>%
st_transform(crs = 5179)
population <- read_csv("data_final/population_seoul.csv")
pop <- population %>%
select(1,2) %>%
mutate(Elderly_pop = round(0.1758*`Total population (Person)`,0)) %>%
rename(name_en =`By administrative divisions(eup, myeon, dong)`)
Gu <- pop$name_en
seoul <- seoul %>%
filter(name_en %in% Gu)
seoul_pop <- seoul %>%
left_join(pop,
by = "name_en") %>%
select(4,5,7,8)
tm_shape(seoul_pop)+
tm_fill("Eldrly_",
style = "quantile",
palette = "Greens",
title = "Elderly Population") +
tm_layout(main.title = "Elderly Population",
main.title.position = "center",
main.title.size = 1.2,
legend.height = 0.45,
legend.width = 0.35,
frame = TRUE) +
tm_borders(alpha = 0.5) +
tm_compass(type="8star", size = 2) +
tm_scale_bar() +
tm_grid(alpha =0.2) +
tm_credits("Source: Data.korea",
position = c("left", "bottom")) +
tmap_style("classic")
tm_shape(seoul_pop)+
tm_fill("Elderly_pop",
style = "quantile",
palette = "Greens",
title = "Elderly Population") +
tm_layout(main.title = "Elderly Population",
main.title.position = "center",
main.title.size = 1.2,
legend.height = 0.45,
legend.width = 0.35,
frame = TRUE) +
tm_borders(alpha = 0.5) +
tm_compass(type="8star", size = 2) +
tm_scale_bar() +
tm_grid(alpha =0.2) +
tm_credits("Source: Data.korea",
position = c("left", "bottom")) +
tmap_style("classic")
pacman::p_load(sf, spNetwork)
roads_by_gu <- st_intersection(road, seoul_pop)
roads_by_gu$gu_name <- seoul_pop$
roads_by_gu$gu_name <- seoul_pop$gu_name[st_within(roads_by_gu,seoul_pop)]
View(roads_by_gu)
unique(roads_by_gu$name_en)
qtm(seoul_pop)
tmap_mode("view")
qtm(seoul_pop)
View(seoul_pop)
View(roads_by_gu)
roads_by_gu <- roads_by_gu %>%
select(1,3,11)
roads_by_gwanak <- roads_by_gu %>%
filter(name_en = "Gwanak-gu")
roads_by_gwanak <- roads_by_gu %>%
filter(name_en == "Gwanak-gu")
tm_shape(roads_by_gwanak) +
tm_lines()
tm_shape(roads_by_gwanak) +
tm_lines() +
tm_shape(hospitals) +
tm_dots()
tm_shape(roads_by_gwanak) +
tm_lines() +
tm_shape(hospitals) +
tm_dots() +
tm_shape(residence) +
tm_dots()
tm_shape(roads_by_gwanak) +
tm_lines() +
tm_shape(hospitals) +
tm_dots() +
tm_shape(residence) +
tm_polygons(col = "red")
pacman::p_load(sf, readr, tidyverse, tmap)
seoul <- st_read(dsn = "data_final/seoul_adm2",
layer= "seoul_adm2") %>%
st_transform(crs = 5179)
clinics <- st_read(dsn = "data_final/seoul_clinics",
layer = "seoul_clinics") %>%
st_transform(crs = 5179)
hospitals <- st_read(dsn = "data_final/seoul_hospitals",
layer = "seoul_hospitals") %>%
st_transform(crs = 5179)
residence <- st_read(dsn = "data_final/seoul_residential",
layer = "seoul_residential") %>%
st_transform(crs = 5179)
road <- st_read(dsn="data_final/seoul_roads",
layer = "seoul_roads")%>%
st_transform(crs = 5179)
population <- read_csv("data_final/population_seoul.csv")
pop <- population %>%
select(1,2) %>%
mutate(Elderly_pop = round(0.1758*`Total population (Person)`,0)) %>%
rename(name_en =`By administrative divisions(eup, myeon, dong)`)
Gu <- pop$name_en
seoul <- seoul %>%
filter(name_en %in% Gu)
hospital_by_gu <- st_intersection(hospitals, seoul)
View(hospital_by_gu)
Gu <- pop$name_en
seoul <- seoul %>%
filter(name_en %in% Gu) %>%
select(name_en)
seoul_pop <- seoul %>%
left_join(pop,
by = "name_en") %>%
select(4,5,7,8)
seoul_pop <- seoul %>%
left_join(pop,
by = "name_en")
seoul_pop
seoul
roads_by_gu <- st_intersection(road, seoul_pop)
roads_by_gu <- st_intersection(road, seoul)
roads_by_gu$gu_name <- seoul_pop$gu_name[st_within(roads_by_gu,seoul_pop)]
roads_by_gu
roads_by_gu <- roads_by_gu %>%
select(1,3,11)
roads_by_gwanak <- roads_by_gu %>%
filter(name_en == "Gwanak-gu")
hospital_by_gu <- st_intersection(hospitals, seoul)
roads_by_gu <- st_intersection(road, seoul)
roads_by_gu$gu_name <- seoul$gu_name[st_within(roads_by_gu,seoul)]
roads_by_gu
roads_by_gu <- roads_by_gu %>%
select(1,3,11)
roads_by_gwanak <- roads_by_gu %>%
filter(name_en == "Gwanak-gu")
hospital_by_gu$gu_name <- seoul$gu_name[st_within(hospital_by_gu,seoul)]
hospital_by_gwanak <- hospital_by_gu %>%
filter(name_en == "Gwanak-Gu")
residence_by_gu <- st_intersection(residence,
seoul)
residence_by_gu$gu_name <- seoul$gu_name[st_within(residence_by_gu, seoul)]
residence_by_gwanak <- residence_by_gu %>%
filter(name_en == "Gwanak-Gu")
tm_shape(roads_by_gwanak) +
tm_lines() +
tm_shape(hospitals_by_gwanak) +
tm_dots() +
tm_shape(residence_by_gwanak) +
tm_polygons(col = "red")
tm_shape(roads_by_gwanak) +
tm_lines() +
tm_shape(hospital_by_gwanak) +
tm_dots() +
tm_shape(residence_by_gwanak) +
tm_polygons(col = "red")
residence_by_gu <- st_intersection(residence,
seoul)
View(residence_by_gu)
residence_by_gwanak <- residence_by_gu %>%
filter(name_en == "Gwanak-Gu")
tm_shape(roads_by_gwanak) +
tm_lines() +
tm_shape(hospital_by_gwanak) +
tm_dots() +
tm_shape(residence_by_gwanak) +
tm_polygons(col = "red")
hospital_by_gu <- st_intersection(hospitals, seoul)
hospital_by_gwanak <- hospital_by_gu %>%
filter(name_en == "Gwanak-Gu")
hospital_by_gwanak <- hospital_by_gu %>%
filter(name_en == "Gwanak-Gu") %>%
select(1,3,11)
hospital_by_gu <- st_intersection(hospitals, seoul)
View(hospitals)
View(hospitals)
View(hospital_by_gu)
hospital_by_gwanak <- hospital_by_gu %>%
filter(name_en == "Gwanak-Gu") %>%
select(1,3,5)
residence_by_gu
residence_by_gwanak <- residence_by_gu %>%
filter(name_en == "Gwanak-Gu") %>%
select(1,3,6)
tm_shape(roads_by_gwanak) +
tm_lines() +
tm_shape(hospital_by_gwanak) +
tm_dots() +
tm_shape(residence_by_gwanak) +
tm_polygons(col = "red")
hospital_by_gwanak <- hospital_by_gu %>%
filter(name_en == "Gwanak-Gu") %>%
select(1,3,5)
tm_shape(roads_by_gwanak) +
tm_lines() +
tm_shape(hospital_by_gwanak) +
tm_dots() +
tm_shape(residence_by_gwanak) +
tm_polygons(col = "red")
hospital_by_gwanak <- hospital_by_gu %>%
filter(name_en == "Gwanak-gu") %>%
select(1,3,5)
residence_by_gwanak <- residence_by_gu %>%
filter(name_en == "Gwanak-gu") %>%
select(1,3,6)
tm_shape(roads_by_gwanak) +
tm_lines() +
tm_shape(hospital_by_gwanak) +
tm_dots() +
tm_shape(residence_by_gwanak) +
tm_polygons(col = "red")
tmap_mode("view")
tm_shape(roads_by_gwanak) +
tm_lines() +
tm_shape(hospital_by_gwanak) +
tm_dots() +
tm_shape(residence_by_gwanak) +
tm_polygons(col = "red")
tmap_mode("view")
tm_shape(roads_by_gwanak) +
tm_lines() +
tm_shape(hospital_by_gwanak) +
tm_dots(col = "green") +
tm_shape(residence_by_gwanak) +
tm_polygons(col = "red")
View(clinics)
clinics <- st_read(dsn = "data_final/seoul_clinics",
layer = "seoul_clinics") %>%
st_transform(crs = 5179)
hospitals <- st_read(dsn = "data_final/seoul_hospitals",
layer = "seoul_hospitals") %>%
st_transform(crs = 5179)
residence <- st_read(dsn = "data_final/seoul_residential",
layer = "seoul_residential") %>%
st_transform(crs = 5179)
road <- st_read(dsn="data_final/seoul_roads",
layer = "seoul_roads")%>%
st_transform(crs = 5179)
clinic <- clinics %>%
select(1,3)
hospitals <- hospitals %>%
select(1,3)
residence <- residence %>%
select(1,3)
road <- road %>%
select(1,3)
seoul <- st_read(dsn = "data_final/seoul_adm2",
layer= "seoul_adm2") %>%
st_transform(crs = 5179)
population <- read_csv("data_final/population_seoul.csv")
pop <- population %>%
select(1,2) %>%
mutate(Elderly_pop = round(0.1758*`Total population (Person)`,0)) %>%
rename(name_en =`By administrative divisions(eup, myeon, dong)`)
Gu <- pop$name_en
seoul <- seoul %>%
filter(name_en %in% Gu) %>%
select(name_en)
seoul_pop <- seoul %>%
left_join(pop,
by = "name_en")
st_write(seoul_pop,
dsn = "data_final",
layer = "seoul_pop",
driver = "ESRI Shapefile")
seoul_pop <- st_read(dsn = "data_final/",
layer = "seoul_pop")
roads_by_gu <- st_intersection(road, seoul)
View(roads_by_gu)
roads_by_gu <- st_intersection(road, seoul)
hospital_by_gu <- st_intersection(hospitals, seoul)
residence_by_gu <- st_intersection(residence, seoul)
roads_by_gwanak <- roads_by_gu %>%
filter(name_en == "Gwanak-gu")
hospital_by_gwanak <- hospital_by_gu %>%
filter(name_en == "Gwanak-gu")
residence_by_gwanak <- residence_by_gu %>%
filter(name_en == "Gwanak-gu")
tmap_mode("view")
tm_shape(roads_by_gwanak) +
tm_lines() +
tm_shape(hospital_by_gwanak) +
tm_dots(col = "green") +
tm_shape(residence_by_gwanak) +
tm_polygons(col = "red")
shiny::runApp('Test')
runApp('Test')
